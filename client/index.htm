<!DOCTYPE html>
<html>
    <head>
        <title>moofy</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
        <script>
            jQuery || document.write("<script src=\"vendor/jquery-2.0.0.min.js\">\x3C/script>");
        </script>
        <script src="vendor/jquery.md5.js"></script>
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        <style type="text/css">
            html {
                text-align: center;
            }
            body {
                width: 1000px;
                display: inline-block;
                text-align: left;
            }
            #container {
                padding-left: 20px;
                text-align: left;
            }
            header {
                padding: 10px;
            }
            header hgroup, #login-box, #user-profile-box {
                display: inline-block;
                vertical-align: top;
            }
            #login-box input, #login-box label {
                font-size: 0.7em;
                height: 15px;
            }
            #login-box .control-group {
                margin-bottom: 4px;
            }
            #user-name {
                font-size: 1.3em;
            }
            #myAccountLinkBox {
                cursor: pointer;
            }
            #user-pic {
                width: 64px;
                height: 64px;
                display: inline-block;
                vertical-align: top;
            }
            #user-info {
                display: inline-block;
                vertical-align: top;
            }
            .navbar {
                margin-top: 15px;
            }
            #manager-link {
                display: none;
                bottom: 0;
                right: 0;
                position: fixed;
                padding: 15px 20px;
            }
        </style>
        <script src="framework.js"></script>
		<script src="bootstrap/js/bootstrap.min.js"></script>
    </head>
    <body>
        <header>
            <!--Name of the song, explosivo-->
            <hgroup>
                <h1>moofy</h1>
                <h5>super-cool rental</h5>
            </hgroup>
            
            <!--User profile/log in-->
            <div id="login-box" class="pull-right">
                <form class="form-horizontal">
                    <fieldset>
                        <div class="control-group">
                            <label class="control-label" for="loginUsername">Username</label>
                            <div class="controls">
                                <input id="loginUsername" name="username" type="text" placeholder="JohnDoe1337">
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="loginPassword">Password</label>
                            <div class="controls">
                                <input id="loginPassword" name="password" type="password" placeholder="secretive">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <button type="submit" class="btn">Sign in</button>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
            <div id="user-profile-box" class="pull-right">
                <div id="myAccountLinkBox">
                    <div id="user-pic"></div>
                    <div id="user-info">
                        <div id="user-name"><span id="user-name-value"></span></div>
                        <div id="user-username">Username: <span id="user-username-value"></span></div>
                        <div id="user-email">Email: <span id="user-email-value"></span></div>
                    </div>
                </div>
                <a id="logoutButton" class="internal pull-right btn btn-small">Log out</a>
            </div>
            
            <!--Nav bar-->
            <div id="mainNav" class="navbar">
                <div class="navbar-inner">
                    <ul class="nav">
                        <li><a href="#about" class="internal">Home</a></li>
                        <li><a href="#listMovies" class="internal">Movies</a></li>
                        <li><a href="#listSongs" class="internal">Songs</a></li>
                    </ul>
                </div>
            </div>
        </header>
        <div id="container">
            <!--Nothing-->
        </div>
        <div id="manager-link">
            <a href="#manager" class="internal btn btn-inverse">Manager Overview</a>
        </div>
        <script>
            reloadUserBox();

            $('#myAccountLinkBox').click(function() {
                framework.loadPage('account');
            });

            $('#logoutButton').click(function() {
                framework.user = null;
                framework.loadPage(framework.defaultPage);
                reloadUserBox();
            });



            function reloadUserBox() {
                if(framework.user) {
                    $("#user-profile-box").show();
                    $("#login-box").hide();
                    $("#user-name-value").html(framework.user.name);
                    $("#user-username-value").text(framework.user.username);
                    $("#user-email-value").text(framework.user.email);
                    $("#user-pic").html('<img src="http://gravatar.com/avatar/'+$.md5(framework.user.email)+'?size=64&d=mm">');
                    //Add manager link to nav bar if admin!
                    if(framework.user.admin) {
                        $("#manager-link").show();
                    }
                    else {
                        $("#manager-link").hide();
                    }
                }
                else {
                    $("#user-profile-box").hide();
                    $("#login-box").show();
                    $("#manager-link").hide();
                }
            }

        </script>
    </body>
</html>